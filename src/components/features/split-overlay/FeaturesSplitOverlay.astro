---
import './FeaturesSplitOverlay.css';
import ButtonLink from '../../buttons/link/ButtonLink.astro';
---

<!-- Preload the background image for faster loading -->
<link rel="preload" as="image" href="/images/images/placeholder/placeholder.jpg">

<section class="features-split-overlay-section">
  <div class="container">
    <div class="features-split-overlay-grid">
      <!-- Left Container - Image Background Only -->
      <div class="features-split-overlay-left features-split-overlay-animate features-split-overlay-fast">
        <!-- Overlapping Image - On top of left container -->
        <div class="features-split-overlay-overlap features-split-overlay-animate">
          <img src="/images/images/placeholder/paceholder2.jpg" alt="Team collaboration" />
        </div>
      </div>

      <!-- Right Container - Text Content -->
      <div class="features-split-overlay-right features-split-overlay-animate">
        <div class="features-split-overlay-text">
          <h2 class="features-split-overlay-title features-split-overlay-animate features-split-overlay-fast">A Present Partnership</h2>
          <p class="features-split-overlay-description features-split-overlay-animate">
            We focus on solving strategic challenges for our portfolio companies. 
            The team has experience both as founders and from strategic work in a variety of industries.
          </p>
          <p class="features-split-overlay-text-description features-split-overlay-animate">
            Our working method is proven, and we give our companies access to an extensive network 
            of industry experts and strategic partners.
          </p>
          <div class="features-split-overlay-action features-split-overlay-animate">
            <ButtonLink href="#">Read more about our method</ButtonLink>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Staggered animation for all elements
  document.addEventListener('DOMContentLoaded', function() {
    const animatedElements = document.querySelectorAll('.features-split-overlay-animate');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry, index) => {
        if (entry.isIntersecting) {
          // Fast elements (image container and title) appear immediately
          if (entry.target.classList.contains('features-split-overlay-fast')) {
            setTimeout(() => {
              entry.target.style.opacity = '1';
              entry.target.style.transform = 'translateY(0)';
            }, 50); // Very short delay for fast elements
          } else {
            // Regular elements have staggered animation
            setTimeout(() => {
              entry.target.style.opacity = '1';
              entry.target.style.transform = 'translateY(0)';
            }, index * 150);
          }
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    animatedElements.forEach(element => {
      observer.observe(element);
    });
  });
</script>
